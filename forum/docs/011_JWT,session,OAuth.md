## 회원기능

회원가입 정보 -> 서버 -> DB

로그인 -> 서버 -> DB : 서버에서 맞는지 처리

서버에 GET/POST 요청시 토큰같은거 같이 보내서 요청 처리하게 하면댐

토큰같은거 쿠키 저장소에 숨겨놓음

1. session 방식

- session id : 이거로 통신
- 로그인을 완료하면 디비나 서버 메모리에 로그인 정보와 session id를 디비에 넣어놓는다
- 그리고 유저에게 session id를 보내줌
- session id로 디비에서 유저 유효성을 검사한다.

- 장점

  - 로그인상태 체크 가능하다

- 단점
  - 디비 조회가 많아져서 부담이 간다

2. token 방식

**JWT**

- 로그인을 성공하면 로그인 정보를 암호화해서 유저에게 보낸다.
- 요청을 보내면 암호화된 정보를 서버에서 처리한다.
- 내용이 변경되면 위조 여부가 식별된다.
- 서버에서 유효성을 검사하니까 디비에 부담이 안간다.

- 단점
  - 토큰이 타인에게 갔을 때 문제가 생길 수 있다.
  - 디비에 이상한 토큰을 저장해두면 되긴 하는데 세션방식이랑 다름없다

## OAuth

사이트 하나에서 유저의 사용 권한을 다른 사이트에서 빌려쓰는거

ex) 소셜로그인

예를 들어 코딩애플이라는 사이트를 운영하는데 구글로그인을 구현하고 싶으면 어떤 식으로 이루어지냐면

1. 유저가 코딩애플 사이트에서 구글 로그인 버튼을 누르면 구글 계정으로 로그인하라고 뜨는데 로그인합니다.

2. "수상한 코딩애플 사이트로 느그 개인정보 전송해도 되냐"고 구글이 물어봅니다.

3. 유저가 허락하면 허락했다고 구글 -> 코딩애플서버 이렇게 알림을 전송합니다.

4. 알림이 도착하면 코딩애플서버는 구글에게 유저 정보를 요청해서 받아옵니다.

거기엔 { 유저이메일, 이름, access_token, 유효기간 } 이런 것들이 들어있습니다.

그 정보들로 JWT 만들어서 사용하거나 session 으로 DB에 저장해두거나 마음대로 한 다음

코딩애플 사이트 로그인시 사용하면 됩니다.

### 사용방법?

next.js에서 회원기능 구현은 NextAuth나 Auth 라이브러리 쓰면 댄다

아이디 비번 로그인시 JWT를 강제로 사용해야한다

아이디/비번을 개발자가 직접 관리하면 보안 이슈가 생길 수 있어서 이렇게 해놨다고 한다.
